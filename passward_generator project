import random
import string

print("=== Advanced Password Generator ===")

while True:
    try:
        length = int(input("Enter password length: "))
        if length <= 0:
            print("Length must be greater than 0.")
            continue
        break
    except ValueError:
        print("Please enter a valid number.")

print("\nSelect character types:")
use_upper = input("Uppercase (y/n): ").lower() == 'y'
use_lower = input("Lowercase (y/n): ").lower() == 'y'
use_digits = input("Numbers (y/n): ").lower() == 'y'
use_special = input("Special characters (y/n): ").lower() == 'y'

if not (use_upper or use_lower or use_digits or use_special):
    print("Error: Please select at least one character type.")
else:
    characters = ""
    password = []

    if use_upper:
        characters += string.ascii_uppercase
        password.append(random.choice(string.ascii_uppercase))
    if use_lower:
        characters += string.ascii_lowercase
        password.append(random.choice(string.ascii_lowercase))
    if use_digits:
        characters += string.digits
        password.append(random.choice(string.digits))
    if use_special:
        characters += string.punctuation
        password.append(random.choice(string.punctuation))

    while len(password) < length:
        password.append(random.choice(characters))

    random.shuffle(password)

    print("\nGenerated Password:")
    print("".join(password))

choice = input("\nGenerate another password? (y/n): ")
if choice.lower() == 'y':
    print("Run the program again ðŸ™‚")
